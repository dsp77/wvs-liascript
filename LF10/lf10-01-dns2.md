<!--
author:   Günter Dannoritzer
email:    g.dannoritzer@wvs-ffm.de
version:  0.1.1
date:     31.01.2025
language: de
narrator: Deutsch Female

comment:  Domain Name System (DNS) - Zweiter Teil

icon:    https://raw.githubusercontent.com/dsp77/wvs-liascript/0938e2e0ce751e270e3e36b8ecfeb09044a41aa0/wvs-logo.png
logo:     02_img/logo-dns2.jpg

tags:     LiaScript, Domain Name System, DNS, Server

link:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css

script:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js

attribute: Lizenz: [CC BY-SA](https://creativecommons.org/licenses/by-sa/4.0/)
-->
# Domain Name System (DNS) - Zweiter Teil

Diese Information baut auf dem ersten Teil [DNS](https://liascript.github.io/course/?https://raw.githubusercontent.com/dsp77/wvs-liascript/main/LF03/dns.md) im Lernfeld 3 auf.


## DNS-Records

DNS-Records (Domain Name System Records) sind spezifische Einträge in der DNS-Datenbank, die festlegen, wie eine Domain und deren Subdomains aufgelöst werden sollen. Sie enthalten wichtige Informationen darüber, welche IP-Adresse oder Dienste einer bestimmten Domain zugeordnet sind. Diese Einträge ermöglichen es, dass Benutzer Domains (wie beispiel.de) anstelle von IP-Adressen (wie 192.0.2.1) verwenden können.  

### Wichtige DNS-Record-Typen:

1. **A-Record (Address Record)**  
   - Verknüpft eine Domain mit einer IPv4-Adresse.  
   - Beispiel: `example.com -> 93.184.216.34`

2. **AAAA-Record (IPv6 Address Record)**  
   - Verknüpft eine Domain mit einer IPv6-Adresse.  
   - Beispiel: `example.com -> 2606:2800:220:1:248:1893:25c8:1946`

3. **CNAME-Record (Canonical Name Record)**  
   - Leitet eine Domain oder Subdomain auf eine andere Domain weiter.  
   - Beispiel: `www.example.com -> example.com`

4. **MX-Record (Mail Exchange Record)**  
   - Gibt den Mailserver für den Empfang von E-Mails an.  
   - Beispiel: `example.com -> mail.example.com`

5. **TXT-Record (Text Record)**  
   - Speichert frei definierbaren Text, oft für Sicherheits- und Verifizierungszwecke, wie SPF, DKIM oder Google-Site-Verifikation.  
   - Beispiel: `example.com -> "v=spf1 include:example.net -all"`

6. **NS-Record (Name Server Record)**  
   - Gibt an, welche Nameserver für die Domain zuständig sind.  
   - Beispiel: `example.com -> ns1.example.com`

7. **PTR-Record (Pointer Record)**  
   - Verknüpft eine IP-Adresse mit einer Domain, verwendet für Reverse-DNS-Lookups.  
   - Beispiel: `192.0.2.1 -> example.com`

8. **SRV-Record (Service Record)**  
   - Dient zur Angabe von Diensten, Ports und Protokollen für bestimmte Anwendungen.  
   - Beispiel: `_sip._tcp.example.com -> 0 5 5060 sipserver.example.com`

9. **SOA-Record (Start of Authority Record)**  
   - Enthält administrative Informationen über die Domain, wie den primären Nameserver und die Kontaktadresse.  
   - Beispiel: `ns1.example.com -> admin@example.com`

### Wofür werden DNS-Records verwendet?

- **Domainauflösung**: Übersetzung von Domainnamen in IP-Adressen.  
- **E-Mail-Routing**: Weiterleitung von E-Mails an den richtigen Mailserver (über MX-Records).  
- **Subdomain-Verwaltung**: Einrichtung von Subdomains für spezifische Dienste.  
- **Sicherheitskonfiguration**: Implementierung von SPF, DKIM und DMARC für E-Mails.  
- **Service-Routing**: Festlegen von spezifischen Diensten (z. B. VoIP, XMPP).

### DNS-Records in Filius

Die folgende Abbildung wurde bereits im ersten Teil verwendet, um einem Domain-Namen eine IPv4-Adresse zuzuordnen. Neben A-Records unterstützt der DNS-Server von Filius noch MX-Records für E-Mail und NS-Records für die Delegation zu anderen DNS-Server.

![DNS-Record im Filius-DNS-Server konfigurieren](../LF03/02_img/lf03_dns_add_a_record.png)

## Filius Übung `NS-Record`

![Übersicht NS-Record-Übung](02_img/lf10-01-dns-sub-domain-filius.png)


### DNS-Konfiguration

Für die Namensauflösung soll der Server `dns.de` die Auflösung für den Webserver `www.domain.de` übernehmen und der Server `sub.dns.de` die Auflösung für den Webserver `www.sub.domain.de` übernehmen.

 * `dns.de`

   * **A-Record**:

     * Domain: `www.domain.de`
    * IP-Adresse: `192.168.0.20`

 * `sub.dns.de`
  
    * **A-Record**:

     * Domain: `www.sub.domain.de`
    * IP-Adresse: `192.168.0.21`


Alle Anfragen werden an den DNS-Server `dns.de` geleitet. Damit der Server die Namensauflösung für die Subdomain an den Server `sub.dns.de` weiterleitet, wird mit einem `NS-Record` eine **Delegation** eingerichtet.

 * `dns.de`

   * **NS-Record**: 
    
     * Domain: `sub.domain.de`
    * Nameserver: `sub.dns.de`

   * **A-Record**:
    
     * Host/Domainname: `sub.dns.de`
    * IP-Adresse: `192.168.0.11`

### Client- und Server-Konfiguration

Auf den beiden Webservern `www.domain.de` und `www.sub.domain.de` wird ein Webserver installiert.

Auf dem Notebook wird ein Webbrowser installiert.

### Aufgabe

Rufen Sie mit dem Notebook folgende Webseiten auf und beobachten Sie, die Signalisierung der Netzwerkverbindung (grünes blinken):

 * `www.domain.de`
 * `www.subdomain.de`


## Filius Übung `MX-Record`

![Übersicht MX-Record-Übung](./02_img/lf10-01-dns-mail-server.png)

### DNS-Konfiguration

* `dns.de`

   * **MX-Record**: 
    
     * Maildomain: `domain.de`
    * Domainname Mailserver: `mail.domain.de`

   * **A-Record**:
    
     * Host/Domainname: `mail.domain.de`
    * IP-Adresse: `192.168.0.22`


### Client-/Server-Konfiguration

  * `mail.domain.de`
    
    * E-Mail-Server installieren
    * E-Mail-Konten erstellen
      * Maildomain: `domain.de`
      * Benutzername: `user1`, `user2`

Den Server starten.

  * NB1

    ![Mail-Client konfigurieren](02_img/lf10-01-mail-konto-konfigurieren.png)

  * NB2

### Aufgabe

Rufen Sie das E-Mail-Konto ab und beobachten Sie dabei die Signalisierung der Netwerkverbindung (grünes blinken). Der `mail.domain.de`-Server sollte erreicht werden.

